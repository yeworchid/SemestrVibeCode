# Игра ОРИС - Сетевая стратегия

## Описание
Многопользовательская экономическая стратегия для 2-4 игроков. Игроки строят здания, добывают ресурсы, производят солдат и атакуют противников. Победитель определяется по количеству очков за ресурсы.

## Технологии
- C# .NET 10
- TCP сокеты
- WinForms (клиент)
- JSON для сериализации

## Запуск
1. Запустить Server
2. Запустить несколько экземпляров Client
3. Подключиться к серверу (localhost:5000)
4. Выбрать архетип
5. Играть

## Протокол

### Типы сообщений
- JOIN - подключение к игре
- START_GAME - начало игры
- ARCHETYPE - выбор архетипа
- START_TURN - начало хода
- PRODUCTION_RESULT - результат производства
- MAKE_SOLDIERS - создание солдат
- ATTACK - атака игрока
- ATTACK_TARGET - результат атаки
- BUILD - постройка здания
- UPGRADE - улучшение здания
- END_TURN - конец хода
- TURN_ENDED - ход завершен
- STATE - состояние игрока
- GAME_END - конец игры
- RESPONSE - ответ сервера

### Структура сообщения
```json
{
  "Type": "MessageType",
  "Payload": "JSON string"
}
```

### Примеры

#### JOIN (клиент -> сервер)
```json
{
  "Type": "JOIN",
  "Payload": "{\"Nickname\":\"Player1\",\"Email\":\"player1@test.com\"}"
}
```

#### START_GAME (сервер -> клиент)
```json
{
  "Type": "START_GAME",
  "Payload": "{\"PlayerId\":1,\"PlayerCount\":2}"
}
```

#### ARCHETYPE (клиент -> сервер)
```json
{
  "Type": "ARCHETYPE",
  "Payload": "{\"ArchetypeType\":\"Warrior\"}"
}
```

#### BUILD (клиент -> сервер)
```json
{
  "Type": "BUILD",
  "Payload": "{\"PlaceId\":5,\"Type\":\"Logging\"}"
}
```

#### STATE (сервер -> клиент)
```json
{
  "Type": "STATE",
  "Payload": "{\"Resources\":{\"Wood\":10,\"Stone\":8},\"Soldiers\":5,\"Defense\":20,\"Buildings\":[{\"PlaceId\":5,\"Type\":\"Logging\",\"Level\":1}]}"
}
```

## Правила игры

### Игровое поле
- Поле 5x5 клеток (25 мест для зданий)
- Каждое здание занимает одну клетку

### Ресурсы
4 класса ресурсов:
- Класс 1 (1 очко): Wood, Stone, Ore, Wheat
- Класс 2 (3 очка): Lumber, Bricks, Metal, Coal, Sand, Bread
- Класс 3 (8 очков): Furniture, Walls, Tools, Glass, Weapon
- Класс 4 (25 очков): Gold, Emerald

### Архетипы
- Greedy: +30% защита, -20% очки
- Patron: +25% очки, -25% защита
- Warrior: игнорирует 20% защиты, солдат стоит 5 хлеб + 2 оружие
- Recruit: солдат стоит 1 хлеб + 1 оружие, +20% защиты врага
- Engineer: возврат 1-2 ресурсов при постройке, -20% очки
- Alchemist: +25% очки за золото/изумруд, -30% за остальное
- Glutton: солдат крадет 2 ресурса, стоит 6 хлеб + 1 оружие
- Neutral: без бонусов

### Ход игры
1. Производство (автоматически)
2. Переработка (автоматически)
3. Создание солдат (опционально)
4. Атака (опционально, с 6 цикла)
5. Строительство/улучшение (опционально)
6. Конец хода

### Победа
Игра длится 15 циклов. Побеждает игрок с наибольшим количеством очков за ресурсы.

## Шифрование
Используется JSON сериализация через System.Text.Json. Сообщения передаются по TCP в виде UTF-8 строк.